---
title: 入侵痕迹清理
date: 2019-3-9 16:14:13
tags:
    - 日志清除
    - linux
categories: [学习笔记]
---

## 登录日志清除
以下命令的输出信息里包括了登录用户名、最近登陆时间、IP地址等信。

<!-- more -->

* 成功登录用户
`last`命令，对应的日志文件`/var/log/wtmp`

* 尝试登录信息
`lastb`命令，对应的日志文件`/var/log/btmp`

* 显示最近登录信息
`lastlog`命令，对应的日志文件`/var/log/lastlog`


**清空日志文件：**

```
echo > /var/log/wtmp

echo > /var/log/btmp

echo > /var/log/lastlog
```

**清除Bash历史**

linux中存放历史命令的文件是`.bash_history`，
清空该文件
```
echo > /root/.bash_history
```

也可以在输入指令的时候指定Bash不保存历史

`<空格>command`

**清除当前登录session的历史：**

history -r

**清除所有历史：**

history -cw

**在真实的入侵情况下需要处理的日志文件非常多，这里就简单讲一小部分**

## logtamper

**一款使用python编写的修改Linux日志工具**

```
git clone https://github.com/re4lity/logtamper.git
```

### 使用

```
躲避管理员w查看

python logtamper.py -m 1 -u re4lity -i 192.168.0.188

清除指定ip的登录日志

python logtamper.py -m 2 -u re4lity -i 192.168.0.188

修改上次登录时间地点

python logtamper.py -m 3 -u re4lity -i 192.168.0.188 -t tty1 -d 2014:05:28:10:11:12
```