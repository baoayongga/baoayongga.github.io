---
title: OWASP Top 10 - 2017
date: 2019-3-2 09:14:13
tags:
    - OWASP
categories: [学习笔记]
---

最近要找工作了，花点时间整理整理知识点补一补。
## Top1 注入

**将不受信任的数据作为命令或查询的一部分发送到解析器时，会产生如SQL注入、OS注入和LDAP（轻量目录访问协议）注入的注入缺陷。攻击者的恶意数据可以诱使解析器在没有适当授权的情况下执行非预期命令或访问数据。**

<!-- more -->

### 危害：
	注入可以导致数据丢失或被破坏，缺乏可审计性或拒绝服务。注入漏洞有时甚至可导致完全接管主机。

### 如何防御
```
	使用安全的API，避免使用解释器

	参数化查询

	转义

	白名单
```


## Top2 失效的身份认证和会话管理

**通常，通过错误使用应用程序的身份认证和会话管理功能，攻击者能够破译密码、密钥或绘画令牌，或者利用其它开发缺陷来暂时性或永久性冒充其他用户的身份。**

`密码管理、超时、密码找回等`

### 危害：
     可能导致部分甚至全部账户遭受攻击，攻击者一旦成功，攻击者能执行受害用户的任何操作。因此管理员账户、特权账户是常见的攻击目标

### 如何防御
```
账号密码密文传输

设置密码和会话有效期，使用强密码

限制或逐渐延迟失败的登录尝试

SSL
```
## Top3 敏感数据泄露

**许多Web应用程序和API都无法正确的保护敏感数据，例如:财务数据、用户数据等、攻击者可以通过窃取或修改未加密的数据来实施诈骗、身份盗窃等犯罪行为。未加密的敏感数据容易受到破坏，因此，我们需要对敏感数据加密，这些数据包括：传输过程中的数据、存储的数据以及浏览器的交互数据。**

### 如何防御

**注重保护重要数据，对于员工需要进行安全意识培训。**

## Top4 XML外部实体（XXE）

**XXE漏洞发生在应用程序解析XML输入时，没有禁止外部实体的加载，导致可加载恶意外部文件和代码 **

### 危害
     造成任意文件读取、命令执行、内网端口扫描、攻击内网网站、发起Dos攻击等危害。

### 如何防御

```
禁止外部实体的解析

过滤用户提交的XML数据
```

## Top5 失效的访问控制

**未对通过身份验证的用户实施恰当的访问控制。攻击者可以利用这些缺陷访问未经授权的功能或数据**

### 危害：
    例如：访问其他用户的账户、查看敏感文件、修改其他用户的数据、更改访问权限等。

### 如何防御
```
除了公共资源，其他默认拒绝访问。

使用一次性的访问控制机制，并在整个应用程序中不断重用它们。

禁用Web服务器目录列表，并确保文件元数据不存在于 Web的根目录中。

记录失败的访问控制，并在适当时向管理员告警）。

当用户注销后，服务器上的JWT令牌应失效。
```

## Top6 安全配置错误

**安全配置错误是最常见的安全问题，通常是由于不安全的默认配置、不完整的临时配置、开源云存储、错误的HTTP标头配置以及包含敏感信息的详细信息所造成的。因此我们不仅需要对所有的操作系统、框架、库和应用程序进行安全配置，而且必须及时修补和升级它们。**

### 危害：
     系统可能在未知的情况下被完全攻破，用户数据可能随着时间被全部盗走或篡改。甚至导致整个系统被完全破坏

### 如何防御
```
自动化安装部署

搭建最小化的平台，不包含任何不必要的功能、组件等。

了解并部署每个环节的软件更新和补丁信息。

漏洞扫描和安全审计
```

## Top7 跨站脚本（XSS）

**跨站脚本是最普遍的web应用安全漏洞。当应用程序在发送给浏览器的页面中包含用户提供的数据，但没有经过适当验证和转义，就会导致跨站**

### 危害：
    攻击者在受害者浏览器中执行脚本以劫持用户会话，插入恶意内容，重定向用户，使用恶意软件劫持用户浏览器等

### 分类

**反射型：恶意代码并没有保存在目标服务器（目标网站）上，而是攻击者通过引诱用户点击一个链接到目标网站的恶意链接来实施攻击。**

**DOM型:客户端由浏览器去解析执行。类似反射型XSS。**

**存储型：恶意代码被保存在目标服务器（目标网站）上，这种攻击具有较强的稳定性和持久性，所有访问镶嵌恶意代码页面的用户都会被攻击。**

### 如何防御

```
验证输入

编码输出（确保输入的字符为数据）
```

## Top8 不安全的反序列化

**说起反序列化首先要知道序列化是什么，序列化就是把对象转换成字节流，以便于保存在内存、文件数据库中；那反序列化就是逆过程，从字节流还原成对象。所以要利用反序列化漏洞，就需要在进行反序列化的地方传入攻击者的序列化代码。
**

### 危害：
    不安全的反序列化会导致远程代码执行。即使反序列化缺陷不会导致远程代码执行，攻击者也可以利用它们来执行攻击，包括：重放攻击、注入攻击和特权提升等。

### 如何防御
```
对序列化对象执行完整性检查和加密处理，防止被恶意篡改和创建恶意对象。

反序列化过程之前执行严格的类型限制。

隔离反序列化的代码，将其放在低权限的状态下运行。

监视反序列化的过程。
```

## Top9 使用含有已知漏洞的组件

**应用程序使用带有已知漏洞的组件会破坏应用程序防御系统，可能导致严重的数据丢失或服务器接管**

### 如何防御

```
移除不用的依赖、功能组件等。

监控CVE，NVD等是否发布已使用组件的相关漏洞信息

仅从官方渠道获取组件。

监控不在维护的库和组件等。
```

## Top10 不足的日志记录和监控

**不足的日志记录和监控，以及事件响应缺失或无效的集成，使攻击者能够进一步攻击系统、保持持续性或转向更多系统，以及篡改、提取或销毁数据。如：未对登录、登录失败和高额交易等记录可审计性事件进行记录；告警和错误事件未能产生或产生不完整的日志信息。**

### 防御：

```
确保所有登录、访问控制失败、输入验证失败能够被记录到日志中去，并保留足够的用户上下文信息，以识别可疑或恶意帐户，并为后期取证预留足够时间。

建立有效的检测和告警机制，使可疑的活动在可接受的时间内被发现并应对。

建立或采取一个应急响应机制和恢复计划。
```